(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){"use strict";var a=n(361);n.o(a,"StudyState")&&n.d(t,"StudyState",(function(){return a.StudyState}));var r=n(362);n.o(r,"StudyState")&&n.d(t,"StudyState",(function(){return r.StudyState}));var s=n(363);n.o(s,"StudyState")&&n.d(t,"StudyState",(function(){return s.StudyState}));var u=n(364);n.o(u,"StudyState")&&n.d(t,"StudyState",(function(){return u.StudyState}));var c=n(365);n.o(c,"StudyState")&&n.d(t,"StudyState",(function(){return c.StudyState}));var o=n(366);n.o(o,"StudyState")&&n.d(t,"StudyState",(function(){return o.StudyState}));var i=n(367);n.o(i,"StudyState")&&n.d(t,"StudyState",(function(){return i.StudyState}));var l=n(368);n.d(t,"StudyState",(function(){return l.a}));n(369)},168:function(e){e.exports=JSON.parse('{"prod":{"host":"studies-pk.herokuapp.com","port":443,"protocol":"https:"},"dev":{"host":"localhost","port":5100,"protocol":"http:"}}')},361:function(e,t){},362:function(e,t){},363:function(e,t){},364:function(e,t){},365:function(e,t){},366:function(e,t){},367:function(e,t){},368:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Enabled="Enabled",e.Disabled="Disabled"}(a||(a={}))},369:function(e,t){},416:function(e,t,n){"use strict";var a=n(0),r=n(14),s=n(387),u=n(383),c=n(632),o=n(19),i=n(18),l=n.n(i),m=n(21),d=n.n(m),f=n(385),j=n(141),p=n(402),y=n.n(p).a.create({baseURL:"/api",timeout:1e4}),S=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y.get("studies",{params:e}));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},E=function(e){var t=e.name;return y.post("study",{name:t})},v=function(e){var t=e.id,n=e.name,a=e.state;return y.put("study/"+t,{name:n,state:a})},b=function(e){var t,n,a,r,s;return l.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.id,n=e.page,a=e.results,r=e.stationId,u.next=3,l.a.awrap(y.get("study/"+t+"/results",{params:{page:n,results:a,stationId:r}}));case 3:return s=u.sent,u.abrupt("return",s.data);case 5:case"end":return u.stop()}}))},h=function(e){var t,n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,l.a.awrap(y.get("study/"+t+"/stations"));case 3:return n=a.sent,a.abrupt("return",n.data);case 5:case"end":return a.stop()}}))},g=n(8),w=n(11),k=n.n(w),O=n(633),x=n(211),C=function(){var e=a.useState(!1),t=d()(e,2),n=t[0],r=t[1],s=a.useState(""),u=d()(s,2),c=u[0],o=u[1],i=a.useState(""),l=d()(i,2),m=l[0],f=l[1],j=a.useRef(y.interceptors.response.use((function(e){return f(e.data),e}),(function(e){return r(!0),o(e.message),Promise.reject(e)})));return a.useEffect((function(){return function(){y.interceptors.response.eject(j.current)}})),a.createElement(x.a,{visible:n,actions:[{label:"Ok",onPress:function(){return r(!1)}}],icon:function(e){return a.createElement(O.a,k()({},e,{name:"wifi-off"}))}},c+"\n"+m)},P=function(e){return a.createElement(g.a,{style:{flex:1}},a.createElement(C,null),e.children)},z=function(e){var t=e.route,n=e.navigation,r=t.params.onSubmit,s=a.useState(""),u=d()(s,2),c=u[0],o=u[1];return a.createElement(P,null,a.createElement(f.a,{label:"Name",value:c,onChangeText:o}),a.createElement(j.a,{icon:"content-save",mode:"contained",onPress:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(E({name:c}));case 2:return e.next=4,l.a.awrap(r());case 4:n.goBack();case 5:case"end":return e.stop()}}))}},"Save"))},I=n(10),D=n.n(I),M=n(7),R=n(370),H=n(371),T=n(110),N=M.a.create({row:{flexDirection:"row",justifyContent:"space-between"}}),Y=function(e){var t=e.route,n=e.navigation,r=t.params,s=r.study,u=r.onSubmit,c=a.useState(s.name),o=d()(c,2),i=o[0],m=o[1],p=a.useState(s.state||T.StudyState.Enabled),y=d()(p,2),S=y[0],E=y[1];return a.createElement(P,null,a.createElement(g.a,{style:N.row},a.createElement(R.a,null,"Id"),a.createElement(R.a,null,s.id)),a.createElement(g.a,{style:N.row},a.createElement(R.a,null,"Created"),a.createElement(R.a,null,D()(s.created).format("DD MMM HH:mm"))),a.createElement(f.a,{label:"Name",value:i,onChangeText:m}),a.createElement(g.a,{style:N.row},a.createElement(R.a,null,S),a.createElement(H.a,{value:S===T.StudyState.Enabled,onValueChange:function(){E(S===T.StudyState.Enabled?T.StudyState.Disabled:T.StudyState.Enabled)}})),a.createElement(j.a,{icon:"content-save",mode:"contained",onPress:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(v({id:s.id,name:i,state:S}));case 2:return e.next=4,l.a.awrap(u());case 4:n.goBack();case 5:case"end":return e.stop()}}))}},"Save"))},L=n(119),J=n(631),W=n(25),A=n.n(W),U=n(35),F=n(386),G=n(98),V="ws://"+window.location.hostname+"/api/ws",q=function(e){var t=e.studyId,n=e.stationId,s=a.useState([]),u=d()(s,2),c=u[0],o=u[1],i=a.useState(0),m=d()(i,2),f=m[0],j=m[1],p=a.useState(0),y=d()(p,2),S=y[0],E=y[1],v=a.useState(0),h=d()(v,2),g=h[0],w=h[1],k=a.useState(!0),O=d()(k,2),x=O[0],C=O[1];a.useEffect((function(){P()}),[f]);var P=function(){var e;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(b({id:t,page:f,results:5,stationId:n}));case 2:e=a.sent,w(e.totalPages),E(e.totalResults),o(e.items),C(!1);case 7:case"end":return a.stop()}}))};if("web"!==r.a.OS){var z=a.useRef(new WebSocket(V+"/studyresults?id="+t+"&stationId="+n)),I=a.useCallback((function(){z.current.onmessage=function(e){var t=JSON.parse(e.data);o((function(e){return e.pop(),[t].concat(A()(e))}))}}),[]),M=a.useCallback((function(){z.current.close()}),[]);a.useEffect((function(){return I(),function(){M()}}),[])}return a.createElement(U.d,null,a.createElement(F.a,null,a.createElement(F.a.Header,null,a.createElement(F.a.Title,null,"Created"),a.createElement(F.a.Title,{numeric:!0},"SensorId"),a.createElement(F.a.Title,{numeric:!0},"Value")),x?a.createElement(G.a,null):c.map((function(e){return a.createElement(F.a.Row,{key:e.created},a.createElement(F.a.Cell,null,D()(e.created).format("DD MMM HH:mm")),a.createElement(F.a.Cell,{numeric:!0},e.sensorId),a.createElement(F.a.Cell,{numeric:!0},e.value))})),a.createElement(F.a.Pagination,{page:f,numberOfPages:g,onPageChange:function(e){return j(e)},label:5*f+1+" - "+Math.min(5*f+5,S)+" of "+S})))},B=Object(J.a)(),_=function(e){var t=e.stations,n=e.studyId;return a.createElement(B.Navigator,{lazy:!0},t.map((function(e){return a.createElement(B.Screen,{name:"Station "+e},(function(t){return a.createElement(q,k()({},t,{studyId:n,stationId:e}))}))})))},K=function(e){var t=e.route,n=e.navigation,r=t.params.study,s=a.useState([]),u=d()(s,2),c=u[0],o=u[1];a.useEffect((function(){i()}),[]);var i=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(h({id:r.id}));case 2:e=t.sent,o(e);case 4:case"end":return t.stop()}}))};return a.useLayoutEffect((function(){n.setOptions({headerRight:function(){return a.createElement(L.a,{icon:"content-paste",size:20,color:"white",onPress:function(){return n.navigate("StudyDetails",{study:r})}})}})}),[]),a.createElement(P,null,c.length>0&&a.createElement(_,{stations:c,studyId:r.id}))},Q=n(634),X=n(46),Z=n(388),$=n(168),ee=n(33),te=n(40),ne=function(e){var t=e.study,n=e.onEditSubmit,r=Object(ee.useNavigation)();return a.createElement(te.a,{onPress:function(){r.navigate("Results",{study:t})},onLongPress:function(){r.navigate("ModifyStudy",{study:t,onSubmit:n})}},a.createElement(X.a.Item,{title:t.name,description:D()(t.created).format("DD MMM YYYY HH:mm"),left:function(e){return a.createElement(X.a.Icon,k()({},e,{icon:"folder"}))},right:function(e){return a.createElement(X.a.Icon,k()({},e,{icon:"chevron-right"}))}}))},ae=$.prod.protocol+"//"+$.prod.host+":"+$.prod.port,re=(M.a.create({fab:{}}),function(e){var t=e.navigation,n=a.useState(!1),r=d()(n,2),s=r[0],u=r[1],c=a.useState([]),o=d()(c,2),i=o[0],m=o[1],f=a.useState(0),j=d()(f,2),p=j[0],y=(j[1],a.useState(!0)),E=d()(y,2),v=E[0],b=E[1];a.useEffect((function(){h()}),[]);var h=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,l.a.awrap(S({page:p}));case 3:e=t.sent,m(e.items),b(!1);case 6:case"end":return t.stop()}}))};return a.useLayoutEffect((function(){t.setOptions({headerRight:function(){return a.createElement(L.a,{icon:"professional-hexagon",size:20,color:"white",onPress:function(){return Q.a.openURL(ae+"/docs/index.html")}})}})}),[]),a.createElement(P,null,a.createElement(X.a.Section,{title:"Studies"},v&&a.createElement(G.a,null),i.map((function(e){return a.createElement(ne,{key:e.created,study:e,onEditSubmit:h})}))),a.createElement(Z.a.Group,{open:s,visible:!0,icon:s?"close":"plus",actions:[{icon:"plus",label:"Add new",onPress:function(){t.navigate("AddStudy",{onSubmit:h})}},{icon:"refresh",label:"Refresh list",onPress:function(){}}],onStateChange:function(e){var t=e.open;return u(t)}}))}),se=function(e){var t=e.studyId,n=a.useState([]),s=d()(n,2),u=s[0],c=s[1],o=a.useState(0),i=d()(o,2),m=i[0],f=i[1],j=a.useState(0),p=d()(j,2),y=p[0],S=p[1],E=a.useState(0),v=d()(E,2),h=v[0],g=v[1],w=a.useState(!0),k=d()(w,2),O=k[0],x=k[1];a.useEffect((function(){C()}),[m]);var C=function(){var e;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(b({id:t,page:m,results:5}));case 2:e=n.sent,g(e.totalPages),S(e.totalResults),c(e.items),x(!1);case 7:case"end":return n.stop()}}))};if("web"!==r.a.OS){var P=a.useRef(new WebSocket(V+"/studyresults?id="+t)),z=a.useCallback((function(){P.current.onmessage=function(e){var t=JSON.parse(e.data);c((function(e){return e.pop(),[t].concat(A()(e))})),S((function(e){return e+1}))}}),[]),I=a.useCallback((function(){P.current.close()}),[]);a.useEffect((function(){return z(),function(){I()}}),[])}return a.createElement(U.d,null,a.createElement(F.a,null,a.createElement(F.a.Header,null,a.createElement(F.a.Title,null,"Created"),a.createElement(F.a.Title,{numeric:!0},"StationId"),a.createElement(F.a.Title,{numeric:!0},"SensorId"),a.createElement(F.a.Title,{numeric:!0},"Value")),O?a.createElement(G.a,null):u.map((function(e){return a.createElement(F.a.Row,{key:e.created},a.createElement(F.a.Cell,null,D()(e.created).format("DD MMM HH:mm")),a.createElement(F.a.Cell,{numeric:!0},e.stationId),a.createElement(F.a.Cell,{numeric:!0},e.sensorId),a.createElement(F.a.Cell,{numeric:!0},e.value))})),a.createElement(F.a.Pagination,{page:m,numberOfPages:h,onPageChange:function(e){return f(e)},label:5*m+1+" - "+Math.min(5*m+5,y)+" of "+y})))},ue=M.a.create({row:{flexDirection:"row",justifyContent:"space-between"}}),ce=function(e){var t=e.route.params.study;return a.createElement(P,null,a.createElement(g.a,{style:ue.row},a.createElement(R.a,null,"Id"),a.createElement(R.a,null,t.id)),a.createElement(g.a,{style:ue.row},a.createElement(R.a,null,"Created"),a.createElement(R.a,null,D()(t.created).format("DD MMM YYYY HH:mm"))),a.createElement(g.a,{style:ue.row},a.createElement(R.a,null,"State"),a.createElement(R.a,null,t.state)),a.createElement(se,{studyId:t.id}))},oe=Object(c.a)(),ie=Object(o.b)((function(e){var t=e.theme;return a.createElement(u.a,null,a.createElement(oe.Navigator,{screenOptions:{headerStyle:{backgroundColor:t.colors.primary},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold"}}},a.createElement(oe.Screen,{name:"Studies",component:re}),a.createElement(oe.Screen,{name:"Results",options:function(e){return{title:e.route.params.study.name}},component:K}),a.createElement(oe.Screen,{name:"ModifyStudy",options:function(e){return{title:"Modify "+e.route.params.study.name}},component:Y}),a.createElement(oe.Screen,{name:"AddStudy",options:function(){return{title:"Add a new study"}},component:z}),a.createElement(oe.Screen,{name:"StudyDetails",options:function(e){return{title:e.route.params.study.name+" details"}},component:ce})))})),le=n(13),me=n.n(le),de=n(92);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){me()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=je({},de.a,{colors:je({},de.a.colors,{primary:"#1a237e",accent:"#000051",backdrop:"rgba(255, 255, 255, 0.92)"})});function ye(){return a.createElement(s.a,{theme:pe},a.createElement(a.Fragment,null,"web"===r.a.OS?a.createElement("style",{type:"text/css"},"\n        @font-face {\n          font-family: 'MaterialCommunityIcons';\n          src: url("+n(189)+") format('truetype');\n        }\n      "):null,a.createElement(ie,null)))}n.d(t,"a",(function(){return ye}))},442:function(e,t,n){n(443),e.exports=n(615)},443:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},592:function(e,t,n){var a={"./af":234,"./af.js":234,"./ar":235,"./ar-dz":236,"./ar-dz.js":236,"./ar-kw":237,"./ar-kw.js":237,"./ar-ly":238,"./ar-ly.js":238,"./ar-ma":239,"./ar-ma.js":239,"./ar-sa":240,"./ar-sa.js":240,"./ar-tn":241,"./ar-tn.js":241,"./ar.js":235,"./az":242,"./az.js":242,"./be":243,"./be.js":243,"./bg":244,"./bg.js":244,"./bm":245,"./bm.js":245,"./bn":246,"./bn.js":246,"./bo":247,"./bo.js":247,"./br":248,"./br.js":248,"./bs":249,"./bs.js":249,"./ca":250,"./ca.js":250,"./cs":251,"./cs.js":251,"./cv":252,"./cv.js":252,"./cy":253,"./cy.js":253,"./da":254,"./da.js":254,"./de":255,"./de-at":256,"./de-at.js":256,"./de-ch":257,"./de-ch.js":257,"./de.js":255,"./dv":258,"./dv.js":258,"./el":259,"./el.js":259,"./en-SG":260,"./en-SG.js":260,"./en-au":261,"./en-au.js":261,"./en-ca":262,"./en-ca.js":262,"./en-gb":263,"./en-gb.js":263,"./en-ie":264,"./en-ie.js":264,"./en-il":265,"./en-il.js":265,"./en-nz":266,"./en-nz.js":266,"./eo":267,"./eo.js":267,"./es":268,"./es-do":269,"./es-do.js":269,"./es-us":270,"./es-us.js":270,"./es.js":268,"./et":271,"./et.js":271,"./eu":272,"./eu.js":272,"./fa":273,"./fa.js":273,"./fi":274,"./fi.js":274,"./fo":275,"./fo.js":275,"./fr":276,"./fr-ca":277,"./fr-ca.js":277,"./fr-ch":278,"./fr-ch.js":278,"./fr.js":276,"./fy":279,"./fy.js":279,"./ga":280,"./ga.js":280,"./gd":281,"./gd.js":281,"./gl":282,"./gl.js":282,"./gom-latn":283,"./gom-latn.js":283,"./gu":284,"./gu.js":284,"./he":285,"./he.js":285,"./hi":286,"./hi.js":286,"./hr":287,"./hr.js":287,"./hu":288,"./hu.js":288,"./hy-am":289,"./hy-am.js":289,"./id":290,"./id.js":290,"./is":291,"./is.js":291,"./it":292,"./it-ch":293,"./it-ch.js":293,"./it.js":292,"./ja":294,"./ja.js":294,"./jv":295,"./jv.js":295,"./ka":296,"./ka.js":296,"./kk":297,"./kk.js":297,"./km":298,"./km.js":298,"./kn":299,"./kn.js":299,"./ko":300,"./ko.js":300,"./ku":301,"./ku.js":301,"./ky":302,"./ky.js":302,"./lb":303,"./lb.js":303,"./lo":304,"./lo.js":304,"./lt":305,"./lt.js":305,"./lv":306,"./lv.js":306,"./me":307,"./me.js":307,"./mi":308,"./mi.js":308,"./mk":309,"./mk.js":309,"./ml":310,"./ml.js":310,"./mn":311,"./mn.js":311,"./mr":312,"./mr.js":312,"./ms":313,"./ms-my":314,"./ms-my.js":314,"./ms.js":313,"./mt":315,"./mt.js":315,"./my":316,"./my.js":316,"./nb":317,"./nb.js":317,"./ne":318,"./ne.js":318,"./nl":319,"./nl-be":320,"./nl-be.js":320,"./nl.js":319,"./nn":321,"./nn.js":321,"./pa-in":322,"./pa-in.js":322,"./pl":323,"./pl.js":323,"./pt":324,"./pt-br":325,"./pt-br.js":325,"./pt.js":324,"./ro":326,"./ro.js":326,"./ru":327,"./ru.js":327,"./sd":328,"./sd.js":328,"./se":329,"./se.js":329,"./si":330,"./si.js":330,"./sk":331,"./sk.js":331,"./sl":332,"./sl.js":332,"./sq":333,"./sq.js":333,"./sr":334,"./sr-cyrl":335,"./sr-cyrl.js":335,"./sr.js":334,"./ss":336,"./ss.js":336,"./sv":337,"./sv.js":337,"./sw":338,"./sw.js":338,"./ta":339,"./ta.js":339,"./te":340,"./te.js":340,"./tet":341,"./tet.js":341,"./tg":342,"./tg.js":342,"./th":343,"./th.js":343,"./tl-ph":344,"./tl-ph.js":344,"./tlh":345,"./tlh.js":345,"./tr":346,"./tr.js":346,"./tzl":347,"./tzl.js":347,"./tzm":348,"./tzm-latn":349,"./tzm-latn.js":349,"./tzm.js":348,"./ug-cn":350,"./ug-cn.js":350,"./uk":351,"./uk.js":351,"./ur":352,"./ur.js":352,"./uz":353,"./uz-latn":354,"./uz-latn.js":354,"./uz.js":353,"./vi":355,"./vi.js":355,"./x-pseudo":356,"./x-pseudo.js":356,"./yo":357,"./yo.js":357,"./zh-cn":358,"./zh-cn.js":358,"./zh-hk":359,"./zh-hk.js":359,"./zh-tw":360,"./zh-tw.js":360};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=592}},[[442,1,2]]]);
//# sourceMappingURL=../../fae94c331f7b30a7c74c.map